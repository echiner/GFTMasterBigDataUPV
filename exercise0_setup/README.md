# Exercise 0: Setup

In this exercise you will understand the software requirements, and how to do an initial setup.

The whole architecture is based on [Docker containers](https://www.docker.com/) in order to make it easier and quicker to setup. So there is no need to install each one of the components. So, to start with, make sure you have Docker installed in your PC.

* Docker Desktop
  * https://www.docker.com/products/docker-desktop

If you want to learn more about the different components of the architecture, feel free to install them individually instead of using Docker. This will give you a better understanding of the components, how to run and configure them.
This is also an option in case you have limited resources in your PC or problems running Docker.

## Architecture software

* Apache NiFi: https://nifi.apache.org/download.html
* Apache Kafka stack: https://www.confluent.io/download/
* Schema registry for windows: https://github.com/renukaradhya/confluentplatform/tree/master/bin/windows
* Kafka tool & Avro plugin: http://www.kafkatool.com/ , https://github.com/laymain/kafka-tool-avro
* Elastic: https://www.elastic.co/es/downloads/elasticsearch
* Kibana: https://www.elastic.co/es/downloads/kibana
* Jupyter: https://www.anaconda.com/distribution/

**NOTE**: The architecture software will be installed when required in each of the exercises. There is no need to download or install them yet.

## Infrastructure Setup

In order to **launch** the required infrastructure you just have to go to the "docker" folder and run the following:

```
docker-compose up -d
```

This will launch the following components, which will be used during the course:

| Component | Service | Description | URL/port |
| ------------- | ------------- | ------------- | ------------- |
| **Apache NiFi**  | nifi | Data Ingestion Tool  | http://localhost:8090/nifi  |
| **Confluent Kafka**  | broker | Message Broker  | localhost:9092  |
| **Confluent Control Center**  | control-center | Kafka Manager & Monitor  |  http://localhost:9021  |
| **Elasticsearch**  | elasticsearch | Data storage and search engine  | http://localhost:9200  |
| **Kibana**  | kibana | Dashboarding and Elasticsearch dev/admin tool  | http://localhost:5601  |
| **Jupyter**  | jupyter | Notebooks analytics  | http://localhost:8888  |

In order to **stop** the infrastructure:

```
docker-compose stop -d
```

In order to **start** the infrastructure:

```
docker-compose start -d
```

## Software requirements

* IDE for Java development (your choice)
  * https://www.eclipse.org/downloads/packages/ (**RECOMMENDED**)
  * https://www.jetbrains.com/idea/download/ (Choose InteliJ Community)
* Maven (for dependencies Management)
  * https://maven.apache.org/download.cgi
* GIT client (for code  management)
  * https://git-scm.com/download/win
* Java Virtual Machine
  * https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html

## Development Environment Setup

* Install IDE
* Download and unzip Maven
* Download the code with any of these two options:

  1. Install GIT and clone the project
 
 ```
 git clone https://github.com/rlopezherrero/GFTMasterBigDataUPV
 ```

  2. Download the course exercise directly from the repository: https://github.com/rlopezherrero/GFTMasterBigDataUPV (click on "Clone or download")

## Admin & Troubleshooting

The easiest way to do many of these things is to use, either the Docker Desktop Dashboard or a tool such as **[Lazydocker](https://github.com/jesseduffield/lazydocker)**:

1. Download the binary: https://github.com/jesseduffield/lazydocker/releases
2. Uncompress
3. Run

In any case, you can just do it using command line as explained in the following subsections.

### Starting and stopping things

In order to stop/start single service, use the following commands:

```
docker-compose start <Service>
```

Where the **<Service>** is listed in the table above ("Component list" section).

### Reading the logs

List the running containers first:

```
docker ps
```

Then use the following command to

```
docker logs <CONTAINER ID or NAME>
```

### Teardown (destroy everything)

```
docker-compose down -d
```